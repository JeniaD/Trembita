{% extends "base.html" %}

{% block title %} Профіль {{ name }} - Трембіта {% endblock title %}

{% block links %} <link rel="stylesheet" href="{{ url_for('static', filename='css/profile.css') }}"> {% endblock links %}

{% block menu %}
    <div class="sidebar-menu__item" onclick="window.location.href='/home'">
        <img src="{{ url_for('static', filename='svg/home.svg') }}" class="sidebar-menu__item-icon" /> Головна
    </div>
    <div class="sidebar-menu__item" onclick="window.location.href='/trending'">
        <img src="{{ url_for('static', filename='svg/explore.svg') }}" class="sidebar-menu__item-icon" /> Тренди
    </div>
    <div class="sidebar-menu__item" onclick="window.location.href='/notifications'">
        <img src="{{ url_for('static', filename='svg/notifications.svg') }}" class="sidebar-menu__item-icon" /> Сповіщення
    </div>
    <div class="sidebar-menu__item" onclick="window.location.href='/messages'">
        <img src="{{ url_for('static', filename='svg/messages.svg') }}" class="sidebar-menu__item-icon" /> Повідомлення
    </div>
    <div class="sidebar-menu__item sidebar-menu__item--active" onclick="window.location.href='/profile'">
        <img src="{{ url_for('static', filename='svg/profile.svg') }}" class="sidebar-menu__item-icon" /> Профіль
    </div>
    <div class="sidebar-menu__item" onclick="window.location.href='/other'">
        <img src="{{ url_for('static', filename='svg/more.svg') }}" class="sidebar-menu__item-icon" /> Інше
    </div>
{% endblock menu %}

{% block content %}
    <div class="profile-details">
        <div class="profile-header">
            <img class="octave__author-logo" src="{{ url_for('main.UploadedAvatar', filename=current_user.id) }}" />
            <h1>{{ current_user.name }}{% if current_user.private %}&#x1F512;{% endif %}</h1>
            <span>@{{ current_user.username }}</span> <span>{{ current_user.date.strftime("%b %d, %Y") }}</span>
        </div>
        <br>
        <div>{{ current_user.about }}</div><br>
        <div>{{ current_user.followers.count() }} стежать, {{ current_user.following.count() }} стежить</div><br>
    </div>

    <hr>
    <h3>Редагувати профіль</h3>
    <form action="/profile" method="post" enctype="multipart/form-data" autocomplete="off">
        <input type="text" id="name" name="name" value="{{ current_user.name }}">
        <input type="text" id="username" name="username" value="{{ current_user.username }}">
        <textarea id="about" name="about" rows="4" cols="50">{{ current_user.about }}</textarea>
        <input type="file" id="avatar" name="avatar" accept="image/*">

        <input type="submit" value="Зберегти">
    </form>
    <hr>

    <h3>Октави</h3>
    {% for post in current_user.posts.all() | sort(attribute="date", reverse=True) %}
        <div class="octave">
          <img class="octave__author-logo" src="{{ url_for('main.UploadedAvatar', filename=current_user.id) }}" />
          <div class="octave__main">
            <div class="octave__header">
              <div class="octave__author-name"> {{ current_user.name }} </div>
              <div class="octave__author-slug"> @{{ current_user.username }} </div>
              <div class="octave__publish-time"> {{ post.date.strftime("%b %d, %Y") }} </div>
            </div>
            <div class="octave__content">
              {{ post.content }}
            </div>
          </div>
        </div>
    {% endfor %}

    <br><a href="/logout" style="text-decoration: none; color: brown;">Вийти</a>
{% endblock content %}

{% block trending %}
{% endblock trending %}

{% block whoToFollow %}
    {% for user in recommendedUsers %}
        <div class="who-to-follow__block">
            <img class="who-to-follow__author-logo" src="{{ url_for('static', filename='img/user-icon.png') }}" />
            <div class="who-to-follow__content">
                <div>
                    <div class="who-to-follow__author-name"> {{ user.name }} </div>
                    <div class="who-to-follow__author-slug"> @{{ user.username }} </div>
                </div>
                <div class="who-to-follow__button"> Стежити </div>
            </div>
        </div>
    {% endfor %}
{% endblock whoToFollow %}
